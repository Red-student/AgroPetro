Расчет топ-5 регионов по урожайности и построение графиков
====================================================

1. Расчет топ-5 регионов по урожайности
-------------------------------------
1.1. Группировка данных:
    - Данные группируются по регионам
    - Для каждого региона вычисляется средняя урожайность
    - Формула: AverageYield = Sum(Yield) / Count(Records)

1.2. Расчет тренда:
    - Для каждого региона берется первый и последний год
    - Вычисляется процентное изменение: ((LastYear - FirstYear) / FirstYear) * 100
    - Положительное значение означает рост урожайности
    - Отрицательное значение означает снижение урожайности

1.3. Сортировка и выбор топ-5:
    - Регионы сортируются по средней урожайности (по убыванию)
    - Выбираются первые 5 регионов
    - Для каждого региона сохраняется:
        * Название региона
        * Средняя урожайность
        * Общая площадь
        * Валовый сбор
        * Тренд изменения

2. Построение графика урожайности по годам
----------------------------------------
2.1. Подготовка данных:
    - Данные группируются по годам
    - Для каждого года вычисляется средняя урожайность
    - Формула: YearlyYield = Sum(Yield) / Count(Records)

2.2. Создание графика:
    - Тип графика: линейный (line)
    - Ось X: годы
    - Ось Y: средняя урожайность (ц/га)
    - Стилизация:
        * Цвет линии: #6BAF92
        * Заполнение под линией: rgba(107, 175, 146, 0.1)
        * Плавность линии: tension = 0.4
        * Подписи осей и заголовок

3. Построение графика посевных площадей
-------------------------------------
3.1. Подготовка данных:
    - Данные группируются по годам
    - Для каждого года суммируется посевная площадь
    - Формула: YearlyArea = Sum(SownArea)

3.2. Создание графика:
    - Тип графика: столбчатый (bar)
    - Ось X: годы
    - Ось Y: общая площадь (тыс. га)
    - Стилизация:
        * Цвет столбцов: #DDB67D
        * Цвет границы: #7C5A41
        * Толщина границы: 1px
        * Подписи осей и заголовок

4. Общие особенности графиков
---------------------------
4.1. Адаптивность:
    - Графики автоматически подстраиваются под размер контейнера
    - Сохраняют пропорции при изменении размера окна

4.2. Интерактивность:
    - При наведении показываются точные значения
    - Возможность масштабирования
    - Легенда с описанием данных

4.3. Обновление данных:
    - Графики автоматически обновляются при изменении фильтров
    - При обновлении данных старые графики уничтожаются
    - Создаются новые графики с актуальными данными

5. Форматирование чисел
---------------------
5.1. Урожайность:
    - Формат: F1 (один знак после запятой)
    - Единица измерения: ц/га

5.2. Площадь:
    - Формат: N0 (без десятичных знаков)
    - Единица измерения: тыс. га

5.3. Валовый сбор:
    - Формат: N0 (без десятичных знаков)
    - Единица измерения: тыс. тонн 